<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ternary27: Balanced Ternary Floating Point</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 50px;
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        .trit-demo {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .trit-values {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .trit-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 200px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .trit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .trit-symbol {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .minus { color: #e74c3c; }
        .zero { color: #95a5a6; }
        .plus { color: #27ae60; }

        .calculator {
            background: white;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .calc-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input[type="text"] {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1.2em;
            min-height: 60px;
        }

        .highlight {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .format-box {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
        }

        .format-label {
            display: inline-block;
            background: #667eea;
            padding: 5px 12px;
            border-radius: 5px;
            margin: 5px 5px 5px 0;
            font-size: 0.9em;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px;
            text-align: left;
            font-size: 1.1em;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .advantage {
            color: #27ae60;
            font-weight: bold;
        }

        .info-box {
            background: #e8f4f8;
            border-left: 5px solid #3498db;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        code {
            background: #f4f4f4;
            color: black;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            .content { padding: 20px; }
            header { padding: 40px 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° Ternary27</h1>
            <p class="subtitle">A Balanced Ternary Floating Point Standard</p>
        </header>

        <div class="content">
            <section id="intro">
                <h2>What is Balanced Ternary?</h2>
                <p>Instead of using just 0 and 1 (binary), balanced ternary uses three values: <span class="highlight">minus (‚àí)</span>, <span class="highlight">zero (0)</span>, and <span class="highlight">plus (+)</span>, representing -1, 0, and 1 respectively.</p>

                <div class="trit-demo">
                    <h3>The Three States (Trits)</h3>
                    <div class="trit-values">
                        <div class="trit-card">
                            <div class="trit-symbol minus">‚àí</div>
                            <div>Minus</div>
                            <div style="color: #7f8c8d;">Value: -1</div>
                        </div>
                        <div class="trit-card">
                            <div class="trit-symbol zero">0</div>
                            <div>Zero</div>
                            <div style="color: #7f8c8d;">Value: 0</div>
                        </div>
                        <div class="trit-card">
                            <div class="trit-symbol plus">+</div>
                            <div>Plus</div>
                            <div style="color: #7f8c8d;">Value: 1</div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üí° Key Insight:</strong> The sign of a number is always the sign of its most significant non-zero trit. No separate sign bit needed!
                </div>
            </section>

            <section id="examples">
                <h2>Understanding Ternary Numbers</h2>
                
                <h3>Converting Ternary to Decimal</h3>
                <p>Just like binary uses powers of 2, ternary uses powers of 3. Each position from right to left represents 3‚Å∞, 3¬π, 3¬≤, 3¬≥, etc.</p>

                <div class="calculator">
                    <h4>Try It: Ternary to Decimal Converter</h4>
                    <div class="calc-input">
                        <input type="text" id="ternaryInput" placeholder="Enter ternary (e.g., +‚àí0‚àí)" value="+‚àí0‚àí">
                        <button onclick="convertTernary()">Convert ‚Üí</button>
                    </div>
                    <div class="result" id="ternaryResult">Enter a ternary number to see its decimal value</div>
                </div>

                <div class="format-box">
                    <strong>Example: +‚àí0‚àí = 17</strong><br><br>
                    Position: &nbsp;&nbsp;3¬≥ &nbsp; 3¬≤ &nbsp; 3¬π &nbsp; 3‚Å∞<br>
                    Weight: &nbsp;&nbsp;&nbsp;&nbsp;27 &nbsp; 9 &nbsp;&nbsp; 3 &nbsp;&nbsp; 1<br>
                    Digit: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ &nbsp;&nbsp; ‚àí &nbsp;&nbsp; 0 &nbsp;&nbsp; ‚àí<br>
                    Value: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;27 &nbsp; ‚àí9 &nbsp; 0 &nbsp; ‚àí1<br><br>
                    Sum: 27 ‚àí 9 + 0 ‚àí 1 = <strong>17</strong>
                </div>
            </section>

            <section id="advantages">
                <h2>Why Ternary27?</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Binary32 (IEEE 754)</th>
                            <th>Ternary27</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Width</strong></td>
                            <td>32 bits</td>
                            <td>27 trits</td>
                        </tr>
                        <tr>
                            <td><strong>Unique Values</strong></td>
                            <td>~34 million per exponent</td>
                            <td class="advantage">~3.5 billion per exponent (103√ó more!)</td>
                        </tr>
                        <tr>
                            <td><strong>Range</strong></td>
                            <td>¬±1.4√ó10‚Åª‚Å¥‚Åµ to ¬±3.4√ó10¬≥‚Å∏</td>
                            <td class="advantage">¬±6.6√ó10‚Åª‚Å∑‚Å∞ to ¬±8.1√ó10‚Åµ‚Å∑</td>
                        </tr>
                        <tr>
                            <td><strong>Precision (typical)</strong></td>
                            <td>~7 decimal digits</td>
                            <td class="advantage">~10 decimal digits</td>
                        </tr>
                        <tr>
                            <td><strong>Can represent 1/3 exactly</strong></td>
                            <td>‚ùå No</td>
                            <td class="advantage">‚úÖ Yes! (0.1 in ternary)</td>
                        </tr>
                        <tr>
                            <td><strong>Signed zeros</strong></td>
                            <td>Special case</td>
                            <td class="advantage">Handled elegantly via type codes</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è Trade-off:</strong> Ternary27 cannot represent 1/2 exactly (just as binary can't represent 1/3 exactly). This is a natural consequence of the radix, not a flaw.
                </div>
            </section>

            <section id="format">
                <h2>The Ternary27 Format</h2>
                
                <p>A Ternary27 number consists of 27 trits divided into four fields:</p>

                <div class="format-box">
                    <div class="format-label">Type (2 trits)</div>
                    <div class="format-label">Sign (1 trit)</div>
                    <div class="format-label">Exponent (5 trits)</div>
                    <div class="format-label">Significand (19 trits)</div>
                </div>

                <h3>Type Codes</h3>
                <p>The 2-trit type field provides metadata about the value:</p>
                <ul style="margin: 20px 0; padding-left: 40px;">
                    <li><code>++</code> = Infinity</li>
                    <li><code>+0</code> = Quiet NaN (Not a Number)</li>
                    <li><code>+‚àí</code> = Signaling NaN</li>
                    <li><code>0+</code> = Real Number (rounded down)</li>
                    <li><code>00</code> = Real Number (infinite precision)</li>
                    <li><code>0‚àí</code> = Real Number (rounded up)</li>
                    <li><code>‚àí+, ‚àí0, ‚àí‚àí</code> = Reserved</li>
                </ul>

                <div class="info-box">
                    <strong>üí° Innovation:</strong> Type codes eliminate ambiguity about whether rounding occurred and in which direction‚Äîcrucial for error analysis!
                </div>
            </section>

            <section id="subnormals">
                <h2>Subnormal Numbers: Fighting Underflow</h2>
                
                <p>When numbers get very close to zero, Ternary27 enters "subnormal" mode:</p>
                
                <div class="trit-demo">
                    <h3>How Subnormals Work</h3>
                    <ol style="padding-left: 20px; margin-top: 15px;">
                        <li style="margin: 10px 0;">When the sign trit becomes 0, the number is subnormal</li>
                        <li style="margin: 10px 0;">The exponent is implicitly set to the minimum (‚àí121)</li>
                        <li style="margin: 10px 0;">The 5 exponent trits become part of the significand</li>
                        <li style="margin: 10px 0;">Total: 24 trits of significand (4 extra trits of precision!)</li>
                    </ol>
                </div>

                <div class="info-box">
                    <strong>üéØ Major Benefit:</strong> This completely eliminates "catastrophic cancellation" when subtracting nearly equal normal numbers. The result has <em>more</em> precision than the inputs!
                </div>
            </section>

            <section id="rounding">
                <h2>Rounding: Simpler in Ternary</h2>
                
                <p>As Donald Knuth observed, balanced ternary has a beautiful property: <strong>rounding to nearest and truncation are the same operation!</strong></p>

                <div class="format-box">
                    <strong>Why?</strong> A balanced ternary number cannot be exactly halfway between two representable numbers with fewer digits. You simply remove extra digits and it's properly rounded.
                </div>

                <p style="margin-top: 25px;">Optional directed rounding modes:</p>
                <ul style="margin: 20px 0; padding-left: 40px;">
                    <li><strong>Round toward ‚àí‚àû:</strong> Decrement if truncating a ‚àí trit</li>
                    <li><strong>Round toward +‚àû:</strong> Increment if truncating a + trit</li>
                    <li><strong>Round toward 0:</strong> Apply appropriate rule based on sign</li>
                </ul>
            </section>

            <section id="future">
                <h2>The Future of Ternary Computing</h2>
                
                <p>Ternary27 is designed for a future where balanced ternary hardware becomes practical. Recent advances by hobbyists have demonstrated proof-of-concept ternary logic in silicon.</p>

                <div class="trit-demo">
                    <h3>Why This Matters</h3>
                    <ul style="padding-left: 20px; margin-top: 15px;">
                        <li style="margin: 10px 0;"><strong>Information density:</strong> Each trit carries more information than a bit (log‚ÇÇ(3) ‚âà 1.58 bits)</li>
                        <li style="margin: 10px 0;"><strong>Natural operations:</strong> No need for separate signed/unsigned types</li>
                        <li style="margin: 10px 0;"><strong>Elegant arithmetic:</strong> Negation is trivial (flip + to ‚àí and vice versa)</li>
                        <li style="margin: 10px 0;"><strong>Better precision:</strong> 103√ó more representable values per exponent than binary32</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <strong>Note:</strong> Ternary27 is a forward-looking standard. Widespread adoption requires advances in ternary hardware manufacturing, which may take considerable time given existing binary infrastructure.
                </div>
            </section>

            <section id="clawr">
                <h2>Ternary Support in Clawr</h2>
                
                <p>The Clawr programming language is designed to support ternary architectures when they become mainstream:</p>

                <div class="format-box">
                    <strong>Clawr's Ternary Strategy:</strong><br><br>
                    ‚Ä¢ All numeric types work in both binary and ternary modes<br>
                    ‚Ä¢ Native <code>ternary</code> type for 3-state logic<br>
                    ‚Ä¢ <code>tritfield</code> type for trit manipulation<br>
                    ‚Ä¢ Automatic width optimization (54-trit ‚âà 64-bit range)<br>
                    ‚Ä¢ Forward-compatible syntax
                </div>

                <p style="margin-top: 25px;">The compiler can target binary systems today while being ready for ternary hardware tomorrow‚Äîno syntax changes needed!</p>
            </section>
        </div>
    </div>

    <script>
        function convertTernary() {
            const input = document.getElementById('ternaryInput').value.trim();
            const result = document.getElementById('ternaryResult');
            
            if (!input) {
                result.innerHTML = '‚ùå Please enter a ternary number';
                return;
            }

            // Validate input
            const validChars = /^[+\-0]+$/;
            if (!validChars.test(input)) {
                result.innerHTML = '‚ùå Invalid characters. Use only +, ‚àí, and 0';
                return;
            }

            // Convert
            let decimal = 0;
            let power = 0;
            let breakdown = '';

            for (let i = input.length - 1; i >= 0; i--) {
                const char = input[i];
                const weight = Math.pow(3, power);
                let value = 0;

                if (char === '+') value = 1;
                else if (char === '-' || char === '‚àí') value = -1;
                else value = 0;

                decimal += value * weight;
                
                const sign = value > 0 ? '+' : (value < 0 ? '‚àí' : ' ');
                breakdown = `${sign}(${weight}) ` + breakdown;
                power++;
            }

            result.innerHTML = `
                <strong>Ternary:</strong> ${input}<br>
                <strong>Breakdown:</strong> ${breakdown.trim()}<br>
                <strong>Decimal:</strong> <span class="highlight">${decimal}</span>
            `;
        }

        // Convert on page load
        window.onload = convertTernary;
    </script>
</body>
</html>
